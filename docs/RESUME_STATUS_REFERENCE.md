# Resume Status Reference

**Authoritative documentation for resume registry status values.**

Each status represents the most recent state of a resume in the ARCHER pipeline. When an operation fails, status is updated to reflect the failure (e.g., `parsing_failed` not `normalized`).

---

## Resume Types

ARCHER tracks three types of resumes:

- **`historical`**: Original resumes from archive used as content source for targeting
- **`generated`**: New resumes created by ARCHER pipeline (targeting → templating → rendering)
- **`test`**: Resumes created for testing and development (not part of normal pipeline)

---

## Historical Resume Statuses

Historical resumes progress through processing stages to make them available for analysis and content extraction.

### `raw`
Original `.tex` file from archive (`data/resume_archive/`), not yet processed. Contains LaTeX comments, inconsistent formatting.

### `normalized`
Comments removed, whitespace standardized, ready for parsing. Generated by `process_latex_archive.py` with `normalize=True`.

### `parsed`
Successfully converted to structured YAML format. Resume is now available for targeting context to query via `ResumeDocument` API.

### `parsing_failed`
Failed during LaTeX-to-YAML conversion. Resume remains at last successful stage (normalized `.tex` file exists). Requires manual investigation of parsing errors.

---

## Generated Resume Statuses

Generated resumes progress through the full pipeline: content selection → template population → PDF compilation.

### `pending`
Queued for processing but not yet started. Awaiting available resources or manual trigger.

### `targeting`
Content selection in progress. Targeting context analyzing job requirements and selecting relevant experience bullets, projects, and skills from historical archive.

### `targeting_failed`
Failed during content selection. Possible causes: insufficient matching content, algorithm errors, missing job requirements.

### `targeting_completed`
Content selection succeeded. Selected content ready for templating context to consume.

### `templating`
LaTeX template population in progress. Templating context generating `.tex` file with selected content, applying branding, adjusting spacing.

### `templating_failed`
Failed during template generation. Possible causes: invalid LaTeX syntax, missing style files, template rendering errors.

### `templating_completed`
Template generation succeeded. LaTeX `.tex` file ready for rendering context to compile.

### `rendering`
PDF compilation in progress. Rendering context running `pdflatex` to generate final resume PDF.

### `rendering_failed`
Failed during PDF compilation. Possible causes: LaTeX syntax errors, missing packages, figure paths incorrect, document too long.

### `rendering_completed`
PDF compilation succeeded. Resume PDF generated successfully.

### `approved`
Resume has been approved for delivery. Terminal state indicating human sign-off or automated validation passed. Set by orchestrator or manual review after `rendering_completed`.

---

## Cross-Cutting Statuses

Statuses applicable to both historical and generated resumes in special circumstances.

### `review`
Awaiting manual inspection or approval. Automatic processing paused pending human decision.

### `archived`
No longer active in pipeline. Resume exists for historical reference but is not currently being processed or used.

### `cancelled`
Processing aborted by user or system before completion. Distinguished from `failed` (system error) vs explicit cancellation.

---

## Status Transition Rules

### Historical Resume Flow
```
raw → normalized → parsed
                     ↓
                  _failed
```

### Generated Resume Flow
```
                                      rendering_completed → ✅approved
                                               ↑
                    templating_completed → rendering ↔ ❌rendering_failed
                              ↑
    targeting_completed → templating ↔ ❌templating_failed
             ↑
pending → targeting ↔ ❌targeting_failed
```

### Manual Interventions
Any status can transition to:
- `review` (pause for inspection)
- `cancelled` (abort processing)
- `archived` (deactivate)

---

## Usage Guidelines

**When setting status:**
1. Use the most specific status available (e.g., `parsing_failed` not `failed`)
2. Update status immediately when state changes (don't batch updates)
3. Always specify `source` when logging status changes (identifies which context/script made the change)

**Status naming pattern:**
- **Active states**: `{context}` (e.g., `targeting`, `rendering`)
- **Completion states**: `{context}_completed` (e.g., `targeting_completed`, `rendering_completed`)
- **Failure states**: `{context}_failed` (e.g., `targeting_failed`, `parsing_failed`)
- **Terminal states**: No context prefix (e.g., `approved`, `archived`, `cancelled`)

**Context boundary rule**: Each context can only set statuses for its own operations. Rendering context sets `rendering`, `rendering_completed`, or `rendering_failed` — never `completed` or statuses from other contexts.

**Adding new statuses:**
- Add to this document first
- Update `archer/utils/resume_registry.py` validation if needed
- Document in which context(s) the status is used
- Include typical failure causes for `_failed` statuses
