# Resume Status Reference

**Authoritative documentation for resume registry status values.**

Each status represents the most recent state of a resume in the ARCHER pipeline. When an operation fails, status is updated to reflect the failure (e.g., `parsing_failed` not `normalized`).

---

## Resume Types

ARCHER tracks four types of resumes:

### `experimental/` - Manually Crafted Resumes

**Purpose**: Resumes created using ARCHER tools in a manual workflow (Day 0 approach).

**Characteristics**:
- Manual content selection (not algorithmic targeting)
- Manual YAML editing
- Uses ARCHER's rendering system for PDF compilation
- Intermediate state between fully manual and fully automated

**Example workflow**:
- Select base resume from archive using `ResumeDocumentArchive`
- Copy and edit YAML in `experimental/structured/`
- Convert YAML → LaTeX (templating context)
- Compile LaTeX → PDF (rendering context)

**Registry type**: `experimental`

### `generated/` - Full Pipeline Outputs

**Purpose**: Resumes produced by the complete automated ARCHER pipeline (future).

**Characteristics**:
- Automatic job analysis (intake context)
- Algorithmic content selection (targeting context)
- Template-based generation (templating context)
- Automated compilation (rendering context)
- Minimal human intervention

**Registry type**: `generated`

**Status**: Not yet implemented (requires all four contexts complete)

### `historical/` - Archive Resumes

**Purpose**: Original manually-written resumes from `.archive/Resumes/`.

**Characteristics**:
- Content library for targeting context
- Structured YAML format for analysis
- Indexed in `ResumeDatabase` for content queries
- Read-only reference (not modified by ARCHER)

**Registry type**: `historical`

**Status**: Currently in `data/resume_archive/`, planned migration to `data/resumes/historical/`

### `test/` - Development Resumes

**Purpose**: Test fixtures and validation resumes for ARCHER development.

**Characteristics**:
- Synthetic or simplified resumes for testing
- Used in unit and integration tests
- May have intentional errors or edge cases
- Not for actual job applications

**Registry type**: `test`

**Naming**: Prefix with `_test_` (e.g., `_test_Res202501_Simple.yaml`)

**Status**: Currently in `data/resume_archive/`, planned migration to `data/resumes/test/`

---

## Pipeline Event Types

ARCHER uses two types of pipeline events to track resume activity. See `docs/PIPELINE_EVENTS_REFERENCE.md` for full details.

### `status_change` Events

Standard pipeline events that track resume state transitions. These update the `status` field in the registry and represent active pipeline progression.

### `logged_activity` Events

Observability events that log operations without changing resume status. These provide full compilation metadata for historical resumes without polluting their registry status.

---

## Historical Resume Statuses

Historical resumes progress through processing stages to make them available for analysis and content extraction.

### `raw`
Original `.tex` file from archive (`data/resume_archive/`), not yet processed. Contains LaTeX comments, inconsistent formatting.

### `normalized`
Comments removed, whitespace standardized, ready for parsing. Generated by `process_latex_archive.py` with `normalize=True`.

### `parsed`
Successfully converted to structured YAML format. Resume is now available for targeting context to query via `ResumeDocument` API.

### `parsing_failed`
Failed during LaTeX-to-YAML conversion. Resume remains at last successful stage (normalized `.tex` file exists). Requires manual investigation of parsing errors.

---

### Operations on Historical Resumes

Historical resumes serve as a **read-only content library** for the targeting context. Once parsed, they remain at `parsed` status indefinitely.

**Compilation for Reference:**
Historical resumes can be compiled to PDF for reference purposes, but this is logged as `logged_activity` events in the pipeline rather than `status_change`, providing observability (page count, warnings, compilation time) without changing the resume's status. This distinction exists because pdfs of historical resumes are for ad-hoc reference only. Historical pdfs are only integrated into the ARCHER pipeline through structured representations that the targeting context uses to inform content decisions.

**Validation Not Applicable:**
Historical resumes are not validated, because by definition they are already approved. The validation phase exists to catch quality issues before delivery, but historical resumes have already been delivered successfully in the past.

---

## Generated Resume Statuses

Generated resumes progress through the full pipeline: content selection → template population → PDF compilation.

### `pending`
Queued for processing but not yet started. Awaiting available resources or manual trigger.

### `targeting`
Content selection in progress. Targeting context analyzing job requirements and selecting relevant experience bullets, projects, and skills from historical archive.

### `targeting_failed`
Failed during content selection. Possible causes: insufficient matching content, algorithm errors, missing job requirements.

### `targeting_completed`
Content selection succeeded. Selected content ready for templating context to consume.

### `templating`
LaTeX template population in progress. Templating context generating `.tex` file with selected content, applying branding, adjusting spacing.

### `templating_failed`
Failed during template generation. Possible causes: invalid LaTeX syntax, missing style files, template rendering errors.

### `templating_completed`
Template generation succeeded. LaTeX `.tex` file ready for rendering context to compile.

### `compiling`
PDF compilation in progress. Rendering context running LaTeX compiler to generate PDF.

### `compiling_failed`
Failed during PDF compilation. Possible causes: LaTeX syntax errors, missing packages, figure paths incorrect.

### `compiling_completed`
PDF compilation succeeded. PDF file generated, ready for validation.

### `validating`
PDF validation in progress. Checking page count, content density, and layout constraints.

### `validating_failed`
PDF validation failed. Possible causes: wrong page count (expected 2 pages), section overflow across pages, professional profile line count incorrect.

### `validating_completed`
PDF validation passed. Resume meets all quality constraints.

**Note:** The legacy statuses `rendering`, `rendering_failed`, and `rendering_completed` are deprecated as of this change. Historical pipeline events may still reference these statuses, but new compilations use the split compilation/validation phases above.

### `approved`
Resume has been approved for delivery. Terminal state indicating human sign-off or automated validation passed. Set by orchestrator or manual review after `validating_completed`. The `manage_registry.py approve` command sets this status and copies the PDF to `outs/results/{YYYYMMDD}/`.

---

## Experimental Resume Statuses

Experimental resumes are crafted using ARCHER tools, but not generated with full pipeline automation. They bypass the typical targeting context worfklow and share the same statuses as generated resumes from templating onward.

### `drafting`
YAML resume structure being manually crafted. Content selection done by human, not targeting context. Entry point for experimental resumes before templating.

### `drafting_completed`
YAML resume structure being manually crafted. Content selection done by human, not targeting context. Entry point for experimental resumes before templating.

### Subsequent Statuses
After `drafting_completed`, experimental resumes follow the same flow as generated resumes: `templating` → `templating_completed` → `rendering` → `rendering_completed` → `approved`. See "Generated Resume Statuses" section above for details.

---

## Cross-Cutting Statuses

Statuses applicable to both historical and generated resumes in special circumstances.

### `review`
Awaiting manual inspection or approval. Automatic processing paused pending human decision.

### `archived`
No longer active in pipeline. Resume exists for historical reference but is not currently being processed or used.

### `cancelled`
Processing aborted by user or system before completion. Distinguished from `failed` (system error) vs explicit cancellation.

---

## Status Transition Rules

### Historical Resume Flow
```
raw → normalized → parsed
                     ↓
                  _failed
```

### Generated Resume Flow
```
                                                       validating_completed → ✅approved
                                                                 ↑
                                      compiling_completed → validating ↔ X validating_failed
                                               ↑                                     ╵
                    templating_completed → compiling ↔ X compiling_failed            ╵
                              ↑                                                      ╵
    targeting_completed → templating ↔ X templating_failed                           ╵
             ↑                                                                       ╵
pending → targeting ↔ X targeting_failed                                             ╵
             ↑                                                                       ╵
             └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘
```

### Manual Interventions
Any status can transition to:
- `review` (pause for inspection)
- `cancelled` (abort processing)
- `archived` (deactivate)

---

## Usage Guidelines

**When setting status:**
1. Use the most specific status available (e.g., `parsing_failed` not `failed`)
2. Update status immediately when state changes (don't batch updates)
3. Always specify `source` when logging status changes (identifies which context/script made the change)

**Status naming pattern:**
- **Active states**: `{phase}` or `{context}` (e.g., `targeting`, `compiling`, `validating`)
- **Completion states**: `{phase}_completed` or `{context}_completed` (e.g., `targeting_completed`, `compiling_completed`)
- **Failure states**: `{phase}_failed` or `{context}_failed` (e.g., `targeting_failed`, `compiling_failed`)
- **Terminal states**: No context/phase prefix (e.g., `approved`, `archived`, `cancelled`)

**Context boundary rule**: Each context can only set statuses for its own operations, which may include multiple phases. For example, the rendering context uses `compiling_*` and `validating_*` statuses to distinguish LaTeX compilation from PDF validation. Each context never sets terminal statuses like `completed` or statuses from other contexts.

**Multi-phase contexts**: When a context's operations naturally split into distinct phases (e.g., compilation vs validation), use phase-specific status prefixes rather than the context name. This provides better visibility into pipeline progression.

**Adding new statuses:**
- Add to this document first
- Update `archer/utils/resume_registry.py` validation if needed
- Document in which context(s) the status is used
- Include typical failure causes for `_failed` statuses
